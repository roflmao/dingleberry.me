<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">


<!-- Mirrored from dingleberry.me/page/5/ by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 28 Jul 2020 09:33:33 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta name="verify-v1" content="2rXzy+cQDUSahcuL4FvfXvDHZf0neGFXRtWQjgvNFSg=" />
<meta name="verify-v1" content="cAY9vxAYMdRz6Fqo2XC7yBXodW8+0qyJVN+Jm4NaCjs=" />
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />

<title>dingleberry.me - technical blog shit - Part 5</title>

<link rel="stylesheet" type="text/css" href="../../wp-content/themes/quadstripe/style.css" />

<link rel="stylesheet" type="text/css" href="../../wp-content/themes/quadstripe/blue.css" />



<link rel="alternate" type="application/rss+xml" title="dingleberry.me RSS Feed" href="../../feed/index.html" />

<link rel="pingback" href="../../xmlrpc.php" />



<link rel='stylesheet' id='shadowbox-css-css'  href='../../wp-content/uploads/shadowbox-js/src/shadowbox19ce.css?ver=3.0.3' type='text/css' media='screen' />
<link rel='stylesheet' id='shadowbox-extras-css'  href='../../wp-content/plugins/shadowbox-js/css/extrasc393.css?ver=3.0.3.10' type='text/css' media='screen' />
<link rel='stylesheet' id='sociablecss-css'  href='../../wp-content/plugins/sociable/css/sociable7e2e.css?ver=3.8.1' type='text/css' media='all' />
<link rel='stylesheet' id='quotescollection-style-css'  href='../../wp-content/plugins/quotes-collection/quotes-collection00e2.css?ver=1.5.7' type='text/css' media='all' />
<script type='text/javascript' src='../../wp-includes/js/jquery/jquery3e5a.js?ver=1.10.2'></script>
<script type='text/javascript' src='../../wp-includes/js/jquery/jquery-migrate.min1576.js?ver=1.2.1'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var QCAjax = {"ajaxurl":"http:\/\/dingleberry.me\/wp-admin\/admin-ajax.php","nonce":"413e2c4400","nextquote":"Next quote\u00a0\u00bb","loading":"Loading...","error":"Error getting quote","auto_refresh_max":"30","auto_refresh_count":"0"};
/* ]]> */
</script>
<script type='text/javascript' src='../../wp-content/plugins/quotes-collection/quotes-collection00e2.js?ver=1.5.7'></script>
<script type='text/javascript' src='../../wp-content/plugins/sociable/js/sociable7e2e.js?ver=3.8.1'></script>
<script type='text/javascript' src='../../wp-content/plugins/sociable/js/vuible7e2e.js?ver=3.8.1'></script>
<script type='text/javascript' src='../../wp-content/plugins/sociable/js/addtofavorites7e2e.js?ver=3.8.1'></script>
<script type='text/javascript' src='../../wp-includes/js/jquery/jquery.form.min018d.js?ver=3.37.0'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var WPWallSettings = {"refreshtime":"0","expand_box":""};
/* ]]> */
</script>
<script type='text/javascript' src='../../wp-content/plugins/wp-wall/wp-wall7e2e.js?ver=3.8.1'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="../../xmlrpc0db0.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="../../wp-includes/wlwmanifest.xml" /> 
<meta name="generator" content="WordPress 3.8.1" />
<!-- HeadSpace SEO 3.6.41 by John Godley - urbangiraffe.com -->
<meta name="description" content="technical blog about technical stuff for sysadmins etc" />
<meta name="keywords" content="nagios dashboard bigip f5 varnish munin debian lisa curl linux sysadmin" />
<!-- HeadSpace -->
<script type='text/javascript'>var base_url_sociable = 'http://dingleberry.me/wp-content/plugins/sociable/'</script><script type='text/javascript' src='http://apis.google.com/js/plusone.js'></script><link rel="stylesheet" href="../../wp-content/plugins/wp-wall/wp-wall.css" type="text/css" />
<!-- All in One SEO Pack 2.1.3 by Michael Torbert of Semper Fi Web Design[410,484] -->
<link rel='prev' href='../4/index.html' />
<link rel='next' href='../6/index.html' />

<link rel="canonical" href="index.html" />
<!-- /all in one seo pack -->

</head>



<body>



   <!-- Begin Wrapper -->

   <div id="wrapper">

   

         <!-- Begin Header -->

         <div id="header">

		 

		       <h1><a href="../../index.html">dingleberry.me</a></h1>

				<div class="description">technical blog shit</div>

			   

		 </div>

		 <!-- End Header -->

		 

		 <!-- Begin Navigation -->

		 <div id="navigation">

		 

		       <ul>

			   <li><a href="../../index.html">Home</a></li>

			<li class="page_item page-item-2"><a href="../../about/index.html">About Us</a></li>

				</ul>

		 </div>
		 <!-- End Navigation -->

<br/>
<script type="text/javascript"><!--
google_ad_client = "pub-0660223234642083";
/* 728x90, created 11/9/09 */
google_ad_slot = "8516937673";
google_ad_width = 728;
google_ad_height = 90;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>


		 

		 <!-- Begin Content -->

		 <div id="content">

		 

				<!-- Start Post -->

		 

		       <div class="post">

			   

			   <h2><a href="../../2009/08/new-local-root-hole-in-linux-kernel-in-kernels-back-to-2001/index.html" rel="bookmark" title="Permanent Link to New local root hole in linux kernel in kernels back to 2001">New local root hole in linux kernel in kernels back to 2001</a></h2>



<div class="post-info">Posted August 14, 2009 by MrBerry</div>

			   

			   <p><strong>UPDATE: This exploit doesnt seem to affect my Debian Lenny, anyone else tried? Someone please confirm if the temp-fix does NOT work.</strong></p>
<p><a href="http://blog.cr0.org/2009/08/linux-null-pointer-dereference-due-to.html">http://blog.cr0.org/2009/08/linux-null-pointer-dereference-due-to.html</a><br />
<a href="http://www.theregister.co.uk/2009/08/14/critical_linux_bug/">http://www.theregister.co.uk/2009/08/14/critical_linux_bug/</a></p>
<p>Second time this summer linux kernel experiences big security holes. *shrug*<br />
And this time around its for _ALL_ kernels all the way back to 2001.</p>
<p>Proposed temp-fix:<br />
<code>#!/bin/bash<br />
# temp-fix until patched for<br />
# http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2009-2692<br />
# http://www.theregister.co.uk/2009/08/14/critical_linux_bug/<br />
cd /lib/modules/$(uname -r)/kernel/ &#038;&#038; \<br />
for i in \<br />
net/ipx/ipx.ko \<br />
net/irda/irda.ko net/x25/x25.ko \<br />
net/ax25/ax25.ko \<br />
net/bluetooth/bluetooth.ko \<br />
net/sctp/sctp.ko \<br />
drivers/net/pppoe.ko \<br />
drivers/net/pppox.ko;<br />
do rm -f $i;done</code></p>
<p>This should hopefully solve this security hole until debian/other dists releases updates.</p>



<p>Tags: <a href="../../tag/exploit/index.html" rel="tag">exploit</a>, <a href="../../tag/kernel/index.html" rel="tag">kernel</a>, <a href="../../tag/linux/index.html" rel="tag">linux</a>, <a href="../../tag/local/index.html" rel="tag">local</a></p>
			   

			   </div>

			   

			   <div class="info-box"><a href="../../2009/08/new-local-root-hole-in-linux-kernel-in-kernels-back-to-2001/index.html#comments">No Comments</a></div>

			   

			   <!-- End Post -->



	 

				<!-- Start Post -->

		 

		       <div class="post">

			   

			   <h2><a href="../../2009/08/play-rar-files-with-mplayer-v2-0-now-with-seeking/index.html" rel="bookmark" title="Permanent Link to Play .rar files with mplayer v2.0: now with seeking">Play .rar files with mplayer v2.0: now with seeking</a></h2>



<div class="post-info">Posted August 9, 2009 by MrBerry</div>

			   

			   <p>It really started bothering me that its impossible to seek in media files when using my <a href="../../2008/10/play-rar-files-with-vlc-mplayer/index.html">previous playrar script</a>: </p>
<p>Now im writing a bit more complex version which supports seeking!</p>
<p>I got a tips about using <a href="http://sourceforge.net/projects/rarfs/">rarfs</a>, a <a href="http://en.wikipedia.org/wiki/Filesystem_in_Userspace">FUSE</a> based filesystem mounter. What it does is making your .rar archives into a virtual filesystem. (like the .rar archive really isnt a archive, but real files on a filesystem)<br />
This makes your media files seekable. (mkv,avi,iso(vob), younameit)</p>
<p>Firstly you need to install rarfs on your system. You need to install some deps:<br />
<code>sudo apt-get install automake1.9 libfuse-dev subversion</code><br />
When you have done this, you are ready to checkout the svn tree on sourceforge:<br />
<code>svn co https://rarfs.svn.sourceforge.net/svnroot/rarfs rarfs<br />
cd rarfs/trunk/rarfs/<br />
./configure &#038;&#038; make &#038;&#038; sudo make install</code><br />
(seems here i got a error with doc/Makefile.in, borked release in trunk)<br />
FIX: <code>touch doc/Makefile.in<br />
./configure<br />
make<br />
sudo make install<br />
ls -l /usr/local/bin/rarfs</code><br />
If it returned your file in /usr/local/bin/rarfs we are good to go!</p>
<p>Now we can mount a .rar file with the following command: rarfs bladdiblah.rar /tmp/rar<br />
This seems a bit hard to type everytime you want to play a file, so we make a shellscript to fix this:<br />
<code>#!/bin/bash<br />
RARFILE=$1<br />
TMPDIR="/tmp/playrar/"<br />
RARFS="/usr/local/bin/rarfs"<br />
if [ ! -d /tmp/playrar ]; then<br />
mkdir -p /tmp/playrar<br />
fi<br />
$RARFS $RARFILE $TMPDIR<br />
mplayer -fs $TMPDIR/`ls $TMPDIR`<br />
fusermount -u $TMPDIR</code></p>
<p>What this script does, is to mount the file, play the files inside the rar file, and then unmount the .rar archive.<br />
You can easily wget this script: <a href='../../wp-content/uploads/2009/08/playrar.sh'>playrar.sh</a><br />
Place it in $PATH and give it chmod +x playrar.sh (and change your media player as suited)</p>
<p>This howto was intended to Ubuntu users, but should be done on other linux distributions as well (maybe OS X as well?)</p>
<p>One step closer to easier movie playback <img src="../../wp-includes/images/smilies/icon_smile.gif" alt=":-)" class="wp-smiley" /> </p>



<p>Tags: <a href="../../tag/mplayer/index.html" rel="tag">mplayer</a>, <a href="../../tag/rar/index.html" rel="tag">rar</a>, <a href="../../tag/rarfs/index.html" rel="tag">rarfs</a>, <a href="../../tag/ubuntu/index.html" rel="tag">ubuntu</a></p>
			   

			   </div>

			   

			   <div class="info-box"><a href="../../2009/08/play-rar-files-with-mplayer-v2-0-now-with-seeking/index.html#comments">3 Comments</a></div>

			   

			   <!-- End Post -->



	 

				<!-- Start Post -->

		 

		       <div class="post">

			   

			   <h2><a href="../../2009/08/juniper-netscreen-ipsec-vpn-client-for-linux/index.html" rel="bookmark" title="Permanent Link to Juniper Netscreen IPsec VPN Client for Linux">Juniper Netscreen IPsec VPN Client for Linux</a></h2>



<div class="post-info">Posted August 7, 2009 by MrBerry</div>

			   

			   <p>So we needed a VPN client for our Netscreen IPsec setup.<br />
After much googling and hard hours of configs, it seemed impossible.</p>
<p>Until we discovered shrew: <a href="http://www.shrew.net/">http://www.shrew.net</a></p>
<p><code>apt-get install ike ike-qtgui</code></p>
<p>Do some kernel tweaks to make the tunnel work:<br />
<code>sysctl -e net.ipv4.conf.all.rp_filter=0<br />
sysctl -e net.ipv4.conf.default.rp_filter=0<br />
sysctl -e net.ipv4.conf.eth0.rp_filter=0</code></p>
<p>Put it in /etc/sysctl.conf for loading on boots:<br />
<code>net.ipv4.conf.default.rp_filter=0<br />
net.ipv4.conf.all.rp_filter=0<br />
net.ipv4.conf.eth0.rp_filter=0</code></p>
<p>Also make sure iked is running: <code>/etc/init.d/ike restart</code></p>
<p>Then make your config in shrew from credentials from your hairy juniper netscreen admin and &#8230;CONNECT!</p>



<p>Tags: <a href="../../tag/ipsec/index.html" rel="tag">ipsec</a>, <a href="../../tag/juniper/index.html" rel="tag">juniper</a>, <a href="../../tag/linux/index.html" rel="tag">linux</a>, <a href="../../tag/netscreen/index.html" rel="tag">netscreen</a>, <a href="../../tag/shrew/index.html" rel="tag">shrew</a>, <a href="../../tag/vpn/index.html" rel="tag">vpn</a></p>
			   

			   </div>

			   

			   <div class="info-box"><a href="../../2009/08/juniper-netscreen-ipsec-vpn-client-for-linux/index.html#comments">No Comments</a></div>

			   

			   <!-- End Post -->



	 

				<!-- Start Post -->

		 

		       <div class="post">

			   

			   <h2><a href="../../2009/08/over-32-gb-ram-with-ubuntu-desktop-32-bit/index.html" rel="bookmark" title="Permanent Link to Over 3,2 gb RAM with Ubuntu Desktop 32-bit">Over 3,2 gb RAM with Ubuntu Desktop 32-bit</a></h2>



<div class="post-info">Posted August 6, 2009 by MrBerry</div>

			   

			   <p>Ubuntu Desktop kernel (generic/desktop) doesnt support PAE (<a href="http://en.wikipedia.org/wiki/Physical_Address_Extension">Physical Address Extension</a>)</p>
<p>To get PAE support and usage of more than 3,2 gb ram in 32bits kernelspace you have to install the server kernel:<br />
<code>sudo apt-get install linux-headers-server linux-image-server</code></p>
<p>Reboot, and whoops you can use all your RAM <img src="../../wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley" /> </p>
<p>The alternative would be to install a 64-bit kernel, but you probably wouldnt want this on a desktop because of restricted drivers mostly only support 32-bit (and e.x. multimedia codecs/flash doesnt have good 64-bit support)</p>



<p>Tags: <a href="../../tag/32bit/index.html" rel="tag">32bit</a>, <a href="../../tag/ram/index.html" rel="tag">ram</a>, <a href="../../tag/ubuntu/index.html" rel="tag">ubuntu</a></p>
			   

			   </div>

			   

			   <div class="info-box"><a href="../../2009/08/over-32-gb-ram-with-ubuntu-desktop-32-bit/index.html#comments">No Comments</a></div>

			   

			   <!-- End Post -->



	 

				<!-- Start Post -->

		 

		       <div class="post">

			   

			   <h2><a href="../../2009/07/iphone-3g-3-0-os-tethering-on-ubuntu-linux-9-04-via-bluetooth/index.html" rel="bookmark" title="Permanent Link to iPhone 3G 3.0 OS Tethering on Ubuntu Linux 9.04 via Bluetooth">iPhone 3G 3.0 OS Tethering on Ubuntu Linux 9.04 via Bluetooth</a></h2>



<div class="post-info">Posted July 23, 2009 by MrBerry</div>

			   

			   <p>I have struggeled some with this shit until i came over a script called uit.sh:</p>
<p><a href="http://us.cooperlees.com/download.php?F=uit.sh.gz">http://us.cooperlees.com/download.php?F=uit.sh.gz</a></p>
<p>Download it, and do this to setup deps and config:<br />
<code>gunzip uit.sh.gz &#038;&#038; chmod +x uit.sh &#038;&#038; sudo ./uit.sh -i</code></p>
<p>After that just connect to your iphone tethering with:<br />
<code>sudo ./uit.sh -c</code></p>
<p>Disconnect:<br />
<code>sudo ./uit.sh -d</code></p>
<p>I had some problems getting connection refused, this was because i had turned of 3g to save battery.<br />
So keep that 3g ON if you want tethering!<br />
You may also place the script in PATH to have it globally available, just remember to run the script as root/sudo.</p>
<p>You may also get this to work with some fancy GUI SHIT like blueman, but i like terminal more.</p>
<p>&#8220;We gotta create a GUI, so we can trace the ip&#8221;:<br />
<a href="http://www.youtube.com/v/ygB0ZviqXac" rel="shadowbox[sbpost-380];player=swf;width=640;height=385;">http://www.youtube.com/v/ygB0ZviqXac</a></p>
<p>Goddamn Visual Basic haxx0rz&#8230;</p>



<p>Tags: <a href="../../tag/bluetooth/index.html" rel="tag">bluetooth</a>, <a href="../../tag/iphone/index.html" rel="tag">iphone</a>, <a href="../../tag/linux/index.html" rel="tag">linux</a>, <a href="../../tag/tethering/index.html" rel="tag">tethering</a>, <a href="../../tag/ubuntu/index.html" rel="tag">ubuntu</a></p>
			   

			   </div>

			   

			   <div class="info-box"><a href="../../2009/07/iphone-3g-3-0-os-tethering-on-ubuntu-linux-9-04-via-bluetooth/index.html#comments">1 Comment</a></div>

			   

			   <!-- End Post -->



	 

				<!-- Start Post -->

		 

		       <div class="post">

			   

			   <h2><a href="../../2009/07/star-wars-feat-mc-hammer/index.html" rel="bookmark" title="Permanent Link to Star Wars feat MC Hammer">Star Wars feat MC Hammer</a></h2>



<div class="post-info">Posted July 20, 2009 by MrBerry</div>

			   

			   <p>Time for some non-technical, but still geeky stuff here.</p>
<p><a href="http://www.break.com/index/mc-hammer-vader-busts-a-move.html">MC Hammer Vader Busts a Move</a></p>
<p>HAMMERTIME!</p>



<p>Tags: <a href="../../tag/funny/index.html" rel="tag">funny</a>, <a href="../../tag/hammertime/index.html" rel="tag">hammertime</a>, <a href="../../tag/star-wars/index.html" rel="tag">star wars</a></p>
			   

			   </div>

			   

			   <div class="info-box"><a href="../../2009/07/star-wars-feat-mc-hammer/index.html#comments">No Comments</a></div>

			   

			   <!-- End Post -->



	 

				<!-- Start Post -->

		 

		       <div class="post">

			   

			   <h2><a href="../../2009/07/blocking-bruteforceattacks-with-iptables/index.html" rel="bookmark" title="Permanent Link to Blocking bruteforceattacks with iptables">Blocking bruteforceattacks with iptables</a></h2>



<div class="post-info">Posted July 10, 2009 by morten</div>

			   

			   <p>I recently found out that (oh what a big surprise) people continously tried to bruteforce an ftp server I’ve set up. Since the server didn’t support any type of locking out IP’s that keep failing to log in over and over, I looked up how to do it with iptables. It’s pretty simple.</p>
<p>Here’s the only config you need in order to lock them out :</p>
<p><code>-A INPUT -i eth0 -p tcp --dport 21 -m state --state NEW -m recent --set --name FTP<br />
-A INPUT -i eth0 -p tcp --dport 21 -m state --state NEW -m recent --update --seconds 300 --hitcount 10 --rttl --name FTP -j DROP</code></p>
<p>Or if you wanna do it directly on the commandline :</p>
<p><code>sudo iptables -A INPUT -i eth0 -p tcp --dport 21 -m state --state NEW -m recent --set --name FTP<br />
sudo iptables -A INPUT -i eth0 -p tcp --dport 21 -m state --state NEW -m recent --update --seconds 300 --hitcount 10 --rttl --name FTP -j DROP</code></p>
<p>This means that if someone fails to log in 10 times on port 21, they will have to wait 10 minutes to try again. That will slow down the brutforcers. Ofcourse you can use this for ssh or whatever aswell, just change the port and description.</p>



<p>Tags: <a href="../../tag/block/index.html" rel="tag">block</a>, <a href="../../tag/bruteforce/index.html" rel="tag">bruteforce</a>, <a href="../../tag/iptables/index.html" rel="tag">iptables</a></p>
			   

			   </div>

			   

			   <div class="info-box"><a href="../../2009/07/blocking-bruteforceattacks-with-iptables/index.html#comments">1 Comment</a></div>

			   

			   <!-- End Post -->



	 

				<!-- Start Post -->

		 

		       <div class="post">

			   

			   <h2><a href="../../2009/07/debian-lenny-xen-and-live-migration-using-iscsi-storage-backend/index.html" rel="bookmark" title="Permanent Link to Debian Lenny, Xen and live migration using iscsi storage backend">Debian Lenny, Xen and live migration using iscsi storage backend</a></h2>



<div class="post-info">Posted July 10, 2009 by MrDingle</div>

			   

			   <p>After alot of google-ing for iscsi powered live migration i found references to these two block-iscsi scripts:</p>
<p><a href="http://kinkrsoftware.nl/contrib/xen/block-iscsi">http://kinkrsoftware.nl/contrib/xen/block-iscsi</a><br />
<a href="http://www.suse.de/~garloff/linux/xen/scripts/block-iscsi">http://www.suse.de/~garloff/linux/xen/scripts/block-iscsi</a></p>
<p>However none of them worked &#8220;out of the box&#8221; with Debian Lenny. After alot of messing around with adding debug output in the scripts i found the script in the first link to work when i changed the path to iscsiadm from /usr/sbin to /usr/bin (since the open-iscsi lenny package installs iscsiadm to /usr/bin) and when using the following in my VMs .cfg:</p>
<p><code>disk = [ 'iscsi:iqn.2006-01.com.openfiler:tsn.64b04dcbd835,hda1,w' ]</code></p>
<p>Dont forget to stick the block-iscsi script in /etc/xen/scripts and chmod +x ! <img src="../../wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley" /> </p>



<p>Tags: <a href="../../tag/block-iscsi/index.html" rel="tag">block-iscsi</a>, <a href="../../tag/debian/index.html" rel="tag">debian</a>, <a href="../../tag/lenny/index.html" rel="tag">lenny</a>, <a href="../../tag/xen/index.html" rel="tag">xen</a></p>
			   

			   </div>

			   

			   <div class="info-box"><a href="../../2009/07/debian-lenny-xen-and-live-migration-using-iscsi-storage-backend/index.html#comments">No Comments</a></div>

			   

			   <!-- End Post -->



	 

				<!-- Start Post -->

		 

		       <div class="post">

			   

			   <h2><a href="../../2009/07/ideas-of-cmdb-cfengine-and-nagios-integration/index.html" rel="bookmark" title="Permanent Link to Ideas of CMDB, cfengine and nagios integration">Ideas of CMDB, cfengine and nagios integration</a></h2>



<div class="post-info">Posted July 3, 2009 by morten</div>

			   

			   <p>For a while we’ve been discussing how we can become as lazy as possible when it comes to systemadministration, and this time we’ve made a quite neat integration between our homemade CMDB, cfengine and nagios.</p>
<p>Here’s the idea:</p>
<p>First of all, nobody likes to manually update a CMDB. Also its never really possible to maintain it in a way that makes its info become obsolete after some time. This is why we made a script, cfcmdb, that is triggered from cfengine on every host. This script fills the CMDB database with all sort of info from tools like dmidecode and also from standard commandline tools. (Memory, networkingcards, os version, cpu, vendor etc etc). So now our CMDB pretty much keeps itself up to date.</p>
<p>Lately we came up with the idea to fill our CMDB with cfengine classes information. So adding to the cfcmdb script mentioned above :</p>
<p>cfagent –no-splay -p -v | grep Defined</p>
<p>..and a little perl split and join, we now have all the classes in our CMDB bount to hostid’s.</p>
<p>Cool. On our nagios-server, we made another script, cmdb2nagios, which takes the parameters “hosts”, “hostgroups” or “services”.</p>
<p>cmdb2nagios hosts : creates the nagios host-config file</p>
<p>cmdb2nagios hostgroups : creates the nagios hostgroup-config file</p>
<p>cmdb2nagios services : creates the servicefile</p>
<p>The services parsing is quite nice now, cause we can automatically monitor any services set up with cfengine. Lets say we have a bunch of hosts installed with cfengine and cfengine tells them to have apache2 running. That means that this will be part of a cfengine class, that will be available in our CMDB.</p>
<p>Example of cmdb2nagios service parsing :</p>
<p>[snip]</p>
<p>$sql = “select hosts.name from hosts,classes where classes.name = ‘class_apache’ and hosts.hostid = classes.hostid”;<br />
$execute = $connect-&gt;query($sql) or die “wtf? it didnt work …check syntax.”;<br />
my @servicehosts;<br />
while (@results = $execute-&gt;fetchrow()) {<br />
push(@servicehosts, $results[0]);<br />
}</p>
<p>$hosts = join(”,”,@servicehosts);<br />
print “define service{\n”;<br />
print “\tuse\t\t\tgeneric-service\n”;<br />
print “\thost_name\t\t” . $hosts . “\n”;<br />
print “\tservice_description\tcfg_CHECK_APACHE\n”;<br />
print “\tis_volatile\t\t0\n”;<br />
print “\tmax_check_attempts\t1\n”;<br />
print “\tnormal_check_interval\t5\n”;<br />
print “\tretry_check_interval\t1\n”;<br />
print “\tcontact_groups\t\tlinux-admins\n”;<br />
print “\tnotification_period\t24×7\n”;<br />
print “\tnotification_options\tc,w,r\n”;<br />
print “\tprocess_perf_data\t1\n”;<br />
print “\tcheck_command\t\tcheck_apache\n”;<br />
print “\t}\n\n”;<br />
[snip]</p>
<p>As you can see, monitoring apache will be applied to all hosts running apache.</p>
<p>This leaves us to really only having to  maintain our cfengine configuration, while the CMDB is auto-updated and the nagios-config is auto-parsed.</p>
<p>Also our eventhandlers in nagios tells cfengine to do this and that, so now we can sit back, enjoy a coffee and watch this show.</p>
<p>(see previous post about eventhandlers and cfengine : http://www.sladder.org/?p=261)</p>



<p>Tags: <a href="../../tag/cfengine/index.html" rel="tag">cfengine</a>, <a href="../../tag/cmdb/index.html" rel="tag">cmdb</a>, <a href="../../tag/nagios/index.html" rel="tag">nagios</a></p>
			   

			   </div>

			   

			   <div class="info-box"><a href="../../2009/07/ideas-of-cmdb-cfengine-and-nagios-integration/index.html#comments">No Comments</a></div>

			   

			   <!-- End Post -->



	 

				<!-- Start Post -->

		 

		       <div class="post">

			   

			   <h2><a href="../../2009/03/ext3-full-but-not-_full_/index.html" rel="bookmark" title="Permanent Link to ext3 full but not _FULL_">ext3 full but not _FULL_</a></h2>



<div class="post-info">Posted March 31, 2009 by MrBerry</div>

			   

			   <p><code>root@horsepr0n:~# df -h<br />
Filesystem            Size  Used Avail Use% Mounted on<br />
/dev/sde1             9.3G  8.8G     0 100% /</code></p>
<p>8.8gb of 9.3gb isnt 100%. This is because the default behaviour of ext3 is to reserve 5% of the filesystem to the superuser. (in case things get full, so your system wont ubercrash)</p>
<p>How to fix:<br />
<code>root@horsepr0n:~# tune2fs -m 0 /dev/sde1<br />
tune2fs 1.41.3 (12-Oct-2008)<br />
Setting reserved blocks percentage to 0% (0 blocks)</code></p>
<p>Now we got room for some more horsepr0n:</p>
<p><code>root@horsepr0n:~# df -h<br />
Filesystem            Size  Used Avail Use% Mounted on<br />
/dev/sde1             9.3G  8.8G  473M  96% /</code></p>



<p>Tags: <a href="../../tag/ext3/index.html" rel="tag">ext3</a>, <a href="../../tag/tune2fs/index.html" rel="tag">tune2fs</a></p>
			   

			   </div>

			   

			   <div class="info-box"><a href="../../2009/03/ext3-full-but-not-_full_/index.html#comments">2 Comments</a></div>

			   

			   <!-- End Post -->






<div class="clear">

<div class="alignleft"><a href="../6/index.html" >&laquo; Older Entries</a></div>

			<div class="alignright"><a href="../4/index.html" >Newer Entries &raquo;</a></div>

</div>



		   

		 

		 </div>

		 <!-- End Content -->

		 

		 <!-- Begin Sidebar -->
		 <div id="sidebar">

<div class="sidebar-item"><div class="sidebar-heading"><h3>Tags</h3></div><div class="sidebar-content"><div class="tagcloud"><a href='../../tag/apache/index.html' class='tag-link-35' title='3 topics' style='font-size: 10.153846153846pt;'>apache</a>
<a href='../../tag/apple/index.html' class='tag-link-74' title='4 topics' style='font-size: 11.948717948718pt;'>apple</a>
<a href='../../tag/appletv/index.html' class='tag-link-257' title='3 topics' style='font-size: 10.153846153846pt;'>appletv</a>
<a href='../../tag/atv/index.html' class='tag-link-266' title='3 topics' style='font-size: 10.153846153846pt;'>atv</a>
<a href='../../tag/authentication/index.html' class='tag-link-111' title='2 topics' style='font-size: 8pt;'>authentication</a>
<a href='../../tag/bigip/index.html' class='tag-link-234' title='3 topics' style='font-size: 10.153846153846pt;'>bigip</a>
<a href='../../tag/broadcom/index.html' class='tag-link-255' title='3 topics' style='font-size: 10.153846153846pt;'>broadcom</a>
<a href='../../tag/cfengine/index.html' class='tag-link-144' title='2 topics' style='font-size: 8pt;'>cfengine</a>
<a href='../../tag/check_http/index.html' class='tag-link-166' title='2 topics' style='font-size: 8pt;'>check_http</a>
<a href='../../tag/crystal/index.html' class='tag-link-263' title='4 topics' style='font-size: 11.948717948718pt;'>crystal</a>
<a href='../../tag/crystalhd/index.html' class='tag-link-259' title='4 topics' style='font-size: 11.948717948718pt;'>crystalhd</a>
<a href='../../tag/curl/index.html' class='tag-link-67' title='2 topics' style='font-size: 8pt;'>curl</a>
<a href='../../tag/dd/index.html' class='tag-link-17' title='2 topics' style='font-size: 8pt;'>dd</a>
<a href='../../tag/debian/index.html' class='tag-link-4' title='8 topics' style='font-size: 16.435897435897pt;'>debian</a>
<a href='../../tag/dell/index.html' class='tag-link-138' title='4 topics' style='font-size: 11.948717948718pt;'>dell</a>
<a href='../../tag/etch/index.html' class='tag-link-210' title='3 topics' style='font-size: 10.153846153846pt;'>etch</a>
<a href='../../tag/ext3/index.html' class='tag-link-12' title='2 topics' style='font-size: 8pt;'>ext3</a>
<a href='../../tag/firefox/index.html' class='tag-link-167' title='4 topics' style='font-size: 11.948717948718pt;'>firefox</a>
<a href='../../tag/firefuck/index.html' class='tag-link-208' title='3 topics' style='font-size: 10.153846153846pt;'>firefuck</a>
<a href='../../tag/funny/index.html' class='tag-link-182' title='4 topics' style='font-size: 11.948717948718pt;'>funny</a>
<a href='../../tag/hd/index.html' class='tag-link-264' title='4 topics' style='font-size: 11.948717948718pt;'>hd</a>
<a href='../../tag/iphone/index.html' class='tag-link-75' title='3 topics' style='font-size: 10.153846153846pt;'>iphone</a>
<a href='../../tag/kernel/index.html' class='tag-link-73' title='2 topics' style='font-size: 8pt;'>kernel</a>
<a href='../../tag/linux/index.html' class='tag-link-72' title='10 topics' style='font-size: 18.051282051282pt;'>linux</a>
<a href='../../tag/login/index.html' class='tag-link-150' title='2 topics' style='font-size: 8pt;'>login</a>
<a href='../../tag/monitoring/index.html' class='tag-link-29' title='11 topics' style='font-size: 18.769230769231pt;'>monitoring</a>
<a href='../../tag/mplayer/index.html' class='tag-link-55' title='3 topics' style='font-size: 10.153846153846pt;'>mplayer</a>
<a href='../../tag/mysql/index.html' class='tag-link-88' title='3 topics' style='font-size: 10.153846153846pt;'>mysql</a>
<a href='../../tag/nagios/index.html' class='tag-link-25' title='17 topics' style='font-size: 22pt;'>nagios</a>
<a href='../../tag/network/index.html' class='tag-link-94' title='2 topics' style='font-size: 8pt;'>network</a>
<a href='../../tag/osx/index.html' class='tag-link-163' title='3 topics' style='font-size: 10.153846153846pt;'>osx</a>
<a href='../../tag/ping/index.html' class='tag-link-81' title='3 topics' style='font-size: 10.153846153846pt;'>ping</a>
<a href='../../tag/plugins/index.html' class='tag-link-165' title='3 topics' style='font-size: 10.153846153846pt;'>plugins</a>
<a href='../../tag/rar/index.html' class='tag-link-57' title='2 topics' style='font-size: 8pt;'>rar</a>
<a href='../../tag/salt/index.html' class='tag-link-316' title='3 topics' style='font-size: 10.153846153846pt;'>salt</a>
<a href='../../tag/saltstack/index.html' class='tag-link-317' title='3 topics' style='font-size: 10.153846153846pt;'>saltstack</a>
<a href='../../tag/sarge/index.html' class='tag-link-113' title='2 topics' style='font-size: 8pt;'>sarge</a>
<a href='../../tag/slow/index.html' class='tag-link-158' title='2 topics' style='font-size: 8pt;'>slow</a>
<a href='../../tag/ssh/index.html' class='tag-link-109' title='2 topics' style='font-size: 8pt;'>ssh</a>
<a href='../../tag/tv/index.html' class='tag-link-271' title='3 topics' style='font-size: 10.153846153846pt;'>tv</a>
<a href='../../tag/ubuntu/index.html' class='tag-link-173' title='6 topics' style='font-size: 14.641025641026pt;'>ubuntu</a>
<a href='../../tag/varnish/index.html' class='tag-link-31' title='4 topics' style='font-size: 11.948717948718pt;'>varnish</a>
<a href='../../tag/video/index.html' class='tag-link-27' title='2 topics' style='font-size: 8pt;'>video</a>
<a href='../../tag/xbmc/index.html' class='tag-link-256' title='3 topics' style='font-size: 10.153846153846pt;'>xbmc</a>
<a href='../../tag/xen/index.html' class='tag-link-39' title='4 topics' style='font-size: 11.948717948718pt;'>xen</a></div>
</div></div><div class="sidebar-item"><div class="sidebar-heading"><h3>Links</h3></div><div class="sidebar-content">
	<ul class='xoxo blogroll'>
<li><a href="http://www.debian.org/" title="Debian">Debian</a></li>
<li><a href="http://www.usenix.org/lisa08/going" title="We are going to LISA &#8217;08">LISA &#8217;08</a></li>
<li><a href="http://marcus.nordaaker.com/" title="marcus ramberg">marcus ramberg</a></li>

	</ul>
</div></div>
<!-- WP Wall -->
<div class="sidebar-item"><div class="sidebar-heading"><h3>Wall</h3></div><div class="sidebar-content">
<div id="wp_wall">
		<div class="wallnav">
					<img alt="Previous" id="img_left" src="../../wp-content/plugins/wp-wall/i/left.png" />
					<img alt="Next" id="img_right" src="../../wp-content/plugins/wp-wall/i/right.png" />
					  </div> 
	<div id="wallcomments">
			<div id="wp_latest">Latest on Thu, 04:38 pm</div><p class="wall-1 "><span class="wallauthor" title="Iliya#ivanov[IvanovRukidssqu,2,5] on 2020-07-02 16:38:51" >Iliya#ivanov[IvanovRukidssqu,2,5]</span><span class="wallcomment" title="Мое почтение. 
Располагаю кредитная карта в Гранит банк на сумму 195000 
Перестал гасить потому что украли деньги. Нынче трезвонят и пугают и просят возвратить 1400 
 
Установил софт  запрет входящих вызовов наборы остановились. 
Что совершать с займом дальше предложите?" >: Мое почтение. 
Располагаю кредитная карта в Гранит банк на сумму 195000 
Перестал гасить потому что украли деньги. Нынче трезвонят и пугают и просят возвратить 1400 [...]</span></p><p class="wall-2 wall-alt "><span class="wallauthor" title="Colton Ward on 2020-04-14 09:12:09" >Colton Ward</span><span class="wallcomment" title="Bought a groupon for botox and filler. Waited for 
over two hours for my procedure. During the consultation I 
clearly explained to the woman that I did not want to purchase 
any more products and spend more money and just wanted to 
try out the cosmetic procedures I had purchased which was already $300.



Once I was finally seen by the \   https://gome.com.cn" >: Bought a groupon for botox and filler. Waited for 
over two hours for my procedure. During the consultation I 
clearly explained to the woman that [...]</span></p><p class="wall-3 "><span class="wallauthor" title="eticobysu on 2020-01-27 23:11:02" >eticobysu</span><span class="wallcomment" title="kategoriyab.ru" >: kategoriyab.ru</span></p><p class="wall-4 wall-alt "><span class="wallauthor" title="txcyperoz61 on 2019-12-17 21:41:07" >txcyperoz61</span><span class="wallcomment" title="Огромное тебе СПАСИБО" >: Огромное тебе СПАСИБО</span></p><p class="wall-5 "><span class="wallauthor" title="Dallas on 2019-10-30 06:16:11" >Dallas</span><span class="wallcomment" title="Thanks in support of sharing such a pleasant idea, article is fastidious, thats why i have read it entirely
weight loss doctors chicago phentermine
weight loss doctors chicago phentermine weight loss doctors chicago phentermine" >: Thanks in support of sharing such a pleasant idea, article is fastidious, thats why i have read it entirely
weight loss doctors chicago phentermine
weight loss doctors [...]</span></p><input type="hidden" name="wallpage" id="wallpage" value="1" /><input type="hidden" name="page_left" id="page_left" value="1" /><input type="hidden" name="page_right" id="page_right" value="2" />	</div> 

	
	
		
					
			<p><a id="wall_post_toggle"> &raquo; Leave a reply</a></p>	
		
				
	

	<div id="wall_post">
		<form action="http://dingleberry.me/wp-content/plugins/wp-wall/wp-wall-ajax.php" method="post" id="wallform">
		
						
			<p>
			<label for="wpwall_author"><small>Name</small></label><br/>
			<input type="text" name="wpwall_author" id="wpwall_author" value=""  tabindex="11"  />
			</p>
			
						
						
			<p>
			<label for="wpwall_comment"><small>Comment</small></label><br/>
			<textarea name="wpwall_comment" id="wpwall_comment" rows="3" cols="" tabindex="13" ></textarea>
			</p>
					
			<p><input name="submit_wall_post" type="submit" id="submit_wall_post" tabindex="14" value="Submit" /></p>
			
		</form> 								
	</div>
	
	<div id="wallresponse"></div>
	
</div>
<br />
</div></div><div class="sidebar-item"><div class="sidebar-heading"><h3>Meta</h3></div><div class="sidebar-content">			<ul>
						<li><a href="../../wp-login.html">Log in</a></li>
			<li><a href="../../feed/index.html" title="Syndicate this site using RSS 2.0">Entries <abbr title="Really Simple Syndication">RSS</abbr></a></li>
			<li><a href="../../comments/feed/index.html" title="The latest comments to all posts in RSS">Comments <abbr title="Really Simple Syndication">RSS</abbr></a></li>
			<li><a href="http://wordpress.org/" title="Powered by WordPress, state-of-the-art semantic personal publishing platform.">WordPress.org</a></li>						</ul>
</div></div><div class="sidebar-item">	          	 <div class="sidebar-item">
				 <div class="sidebar-heading"><h3>Search</h3></div>
				 <div class="sidebar-content">
<form method="get" id="searchform" action="http://dingleberry.me/">
<div><input type="text" value="" name="s" id="s" />
<input type="submit" id="searchsubmit" value="" />
</div>
</form>
				</div>
				</div></div></div>

		 </div>
		 <!-- End Sidebar -->
<div id="footer">

Copyright &copy; 2008.  Design by <a href="http://imanto.com/">imanto.com</a>.  Theme by <a href="http://www.themelab.com/">Theme Lab</a> and <a href="http://www.websiteoffice.com/">Online Marketing</a>.  Powered by <a href="http://wordpress.org/">WordPress</a>.

34 queries in 0.193  seconds.

   </div>

   <!-- End Wrapper -->

<script type='text/javascript' src='../../wp-content/uploads/shadowbox-js/afc2df7514bde3dd091bff35b266117519ce.js?ver=3.0.3'></script>

<!-- Begin Shadowbox JS v3.0.3.10 -->
<!-- Selected Players: html, iframe, img, qt, swf, wmp -->
<script type="text/javascript">
/* <![CDATA[ */
	var shadowbox_conf = {
		animate: true,
		animateFade: true,
		animSequence: "sync",
		modal: false,
		showOverlay: true,
		overlayColor: "#000",
		overlayOpacity: "0.8",
		flashBgColor: "#000000",
		autoplayMovies: true,
		showMovieControls: true,
		slideshowDelay: "0",
		resizeDuration: "0.35",
		fadeDuration: "0.35",
		displayNav: true,
		continuous: false,
		displayCounter: true,
		counterType: "default",
		counterLimit: "10",
		viewportPadding: "20",
		handleOversize: "resize",
		handleUnsupported: "link",
		autoDimensions: false,
		initialHeight: "160",
		initialWidth: "320",
		enableKeys: true,
		skipSetup: false,
		flashParams: {bgcolor:"#000000", allowFullScreen:true},
		flashVars: {},
		flashVersion: "9.0.0",
		useSizzle: false
	};
	Shadowbox.init(shadowbox_conf);
/* ]]> */
</script>
<!-- End Shadowbox JS -->


<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
var pageTracker = _gat._getTracker("UA-5928000-1");
pageTracker._trackPageview();
</script>

</body>


<!-- Mirrored from dingleberry.me/page/5/ by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 28 Jul 2020 09:33:33 GMT -->
</html>