<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">


<!-- Mirrored from dingleberry.me/tag/debian/ by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 28 Jul 2020 09:25:47 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta name="verify-v1" content="2rXzy+cQDUSahcuL4FvfXvDHZf0neGFXRtWQjgvNFSg=" />
<meta name="verify-v1" content="cAY9vxAYMdRz6Fqo2XC7yBXodW8+0qyJVN+Jm4NaCjs=" />
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />

<title>debian | dingleberry.me</title>

<link rel="stylesheet" type="text/css" href="../../wp-content/themes/quadstripe/style.css" />

<link rel="stylesheet" type="text/css" href="../../wp-content/themes/quadstripe/blue.css" />



<link rel="alternate" type="application/rss+xml" title="dingleberry.me RSS Feed" href="../../feed/index.html" />

<link rel="pingback" href="../../xmlrpc.php" />



<link rel="alternate" type="application/rss+xml" title="dingleberry.me &raquo; debian Tag Feed" href="feed/index.html" />
<link rel='stylesheet' id='shadowbox-css-css'  href='../../wp-content/uploads/shadowbox-js/src/shadowbox19ce.css?ver=3.0.3' type='text/css' media='screen' />
<link rel='stylesheet' id='shadowbox-extras-css'  href='../../wp-content/plugins/shadowbox-js/css/extrasc393.css?ver=3.0.3.10' type='text/css' media='screen' />
<link rel='stylesheet' id='sociablecss-css'  href='../../wp-content/plugins/sociable/css/sociable7e2e.css?ver=3.8.1' type='text/css' media='all' />
<link rel='stylesheet' id='quotescollection-style-css'  href='../../wp-content/plugins/quotes-collection/quotes-collection00e2.css?ver=1.5.7' type='text/css' media='all' />
<script type='text/javascript' src='../../wp-includes/js/jquery/jquery3e5a.js?ver=1.10.2'></script>
<script type='text/javascript' src='../../wp-includes/js/jquery/jquery-migrate.min1576.js?ver=1.2.1'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var QCAjax = {"ajaxurl":"http:\/\/dingleberry.me\/wp-admin\/admin-ajax.php","nonce":"413e2c4400","nextquote":"Next quote\u00a0\u00bb","loading":"Loading...","error":"Error getting quote","auto_refresh_max":"30","auto_refresh_count":"0"};
/* ]]> */
</script>
<script type='text/javascript' src='../../wp-content/plugins/quotes-collection/quotes-collection00e2.js?ver=1.5.7'></script>
<script type='text/javascript' src='../../wp-content/plugins/sociable/js/sociable7e2e.js?ver=3.8.1'></script>
<script type='text/javascript' src='../../wp-content/plugins/sociable/js/vuible7e2e.js?ver=3.8.1'></script>
<script type='text/javascript' src='../../wp-content/plugins/sociable/js/addtofavorites7e2e.js?ver=3.8.1'></script>
<script type='text/javascript' src='../../wp-includes/js/jquery/jquery.form.min018d.js?ver=3.37.0'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var WPWallSettings = {"refreshtime":"0","expand_box":""};
/* ]]> */
</script>
<script type='text/javascript' src='../../wp-content/plugins/wp-wall/wp-wall7e2e.js?ver=3.8.1'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="../../xmlrpc0db0.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="../../wp-includes/wlwmanifest.xml" /> 
<meta name="generator" content="WordPress 3.8.1" />
<!-- HeadSpace SEO 3.6.41 by John Godley - urbangiraffe.com -->
<meta name="description" content="technical blog about technical stuff for sysadmins etc" />
<meta name="keywords" content="nagios dashboard bigip f5 varnish munin debian lisa curl linux sysadmin" />
<!-- HeadSpace -->
<script type='text/javascript'>var base_url_sociable = 'http://dingleberry.me/wp-content/plugins/sociable/'</script><script type='text/javascript' src='http://apis.google.com/js/plusone.js'></script><link rel="stylesheet" href="../../wp-content/plugins/wp-wall/wp-wall.css" type="text/css" />
<!-- All in One SEO Pack 2.1.3 by Michael Torbert of Semper Fi Web Design[410,484] -->
<link rel="canonical" href="index.html" />
<!-- /all in one seo pack -->

</head>



<body>



   <!-- Begin Wrapper -->

   <div id="wrapper">

   

         <!-- Begin Header -->

         <div id="header">

		 

		       <h1><a href="../../index.html">dingleberry.me</a></h1>

				<div class="description">technical blog shit</div>

			   

		 </div>

		 <!-- End Header -->

		 

		 <!-- Begin Navigation -->

		 <div id="navigation">

		 

		       <ul>

			   <li><a href="../../index.html">Home</a></li>

			<li class="page_item page-item-2"><a href="../../about/index.html">About Us</a></li>

				</ul>

		 </div>
		 <!-- End Navigation -->

<br/>
<script type="text/javascript"><!--
google_ad_client = "pub-0660223234642083";
/* 728x90, created 11/9/09 */
google_ad_slot = "8516937673";
google_ad_width = 728;
google_ad_height = 90;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>


		 

		 <!-- Begin Content -->

		 <div id="content">

		 

				<!-- Start Post -->

		 

		       <div class="post">

			   

			   <h2><a href="../../2011/02/monitor-dell-servers-on-debian-squeeze-with-nagios/index.html" rel="bookmark" title="Permanent Link to Monitor Dell servers on Debian Squeeze with Nagios">Monitor Dell servers on Debian Squeeze with Nagios</a></h2>



<div class="post-info">Posted February 10, 2011 by MrBerry</div>

			   

			   <p>Im just writing up this post because the dellomsa packages arent working with the new Debian Squeeze 6.0.</p>
<p>I had problems with the omreport command not giving me info of ex memory/psu/cpu. (omreport chassis info said No sensors found etc)</p>
<p>I used some hours to try to get it working with a newer dellomsa but that didnt work either.<br />
Then i found some official Dell Ubuntu packages, which i found working excellent on Debian Squeeze as well:<br />
<code>dpkg -P dellomsa #Make sure dellomsa isnt installed.<br />
echo 'deb http://linux.dell.com/repo/community/deb/latest /' | sudo tee -a /etc/apt/sources.list.d/linux.dell.com.sources.list<br />
apt-get update<br />
apt-get install srvadmin-base smbios-utils</code></p>
<p>You will also need the <a href="http://security.ubuntu.com/ubuntu/pool/universe/libs/libsmbios/libsmbios2_2.2.13-0ubuntu4_amd64.deb">libsmbios2_2.2.13-0ubuntu4_amd64.deb</a> from Ubuntu Lucid to get smbios stuff working.<br />
<code>dpkg -i libsmbios2_2.2.13-0ubuntu4_amd64.deb<br />
/etc/init.d/dataeng start #if this starts, omreport works!</code></p>
<p>Now you have the newer Debian Squeeze Dell stuff working.</p>
<p>We have deployed our hwmonitoring of our Dell servers with <a href="http://folk.uio.no/trondham/software/check_openmanage.html">check_openmanage </a> and<a href="http://www.nagios.org/"> Nagios</a><br />
Read more about the check_openmanage on the check_openmanage site (this is a great plugin btw!)</p>
<p>Resources:<br />
<a href="http://folk.uio.no/trondham/software/check_openmanage.html">http://folk.uio.no/trondham/software/check_openmanage.html</a><br />
<a href="http://linux.dell.com/repo/community/deb/latest/">http://linux.dell.com/repo/community/deb/latest/</a></p>



<p>Tags: <a href="index.html" rel="tag">debian</a>, <a href="../dell/index.html" rel="tag">dell</a>, <a href="../dellomsa/index.html" rel="tag">dellomsa</a>, <a href="../monitoring/index.html" rel="tag">monitoring</a>, <a href="../nagios/index.html" rel="tag">nagios</a>, <a href="../squeeze/index.html" rel="tag">squeeze</a></p>
			   

			   </div>

			   

			   <div class="info-box"><a href="../../2011/02/monitor-dell-servers-on-debian-squeeze-with-nagios/index.html#comments">6 Comments</a></div>

			  

			   

			   <!-- End Post -->



	 

				<!-- Start Post -->

		 

		       <div class="post">

			   

			   <h2><a href="../../2009/10/backporting-varnish-from-debian-unstabletesting-to-etch/index.html" rel="bookmark" title="Permanent Link to Backporting varnish from debian unstable/testing to etch">Backporting varnish from debian unstable/testing to etch</a></h2>



<div class="post-info">Posted October 7, 2009 by MrDingle</div>

			   

			   <p>Recently i wanted to upgrade Varnish to latest stable &#8211; 2.0.4 on our debian etch boxes. Do you think debian has the latest version in the etch repos? Ofcourse not.. However, backporting turned out to be allmost too easy <img src="../../wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley" />  Here is how I did it;</p>
<p>1. Edit your /etc/apt/sources.list deb-src entry to reflect which debian version you want to backport packages from. My entry looks like this:<br />
<code>deb-src http://ftp.no.debian.org/debian/ unstable main non-free contrib</code><br />
2. Download the source code from the repo:<br />
<code>apt-get source varnish</code><br />
3. Make sure you have all the deps needed:<br />
<code>apt-get build-dep varnish</code><br />
4. (might not be necessary) I was missing the fakeroot package:<br />
<code>apt-get install fakeroot</code><br />
5. Build the package(s):<br />
<code>cd varnish-2.0.4<br />
dpkg-buildpackage -rfakeroot -uc -b</code><br />
6. And finally install your newly created packages:<br />
<code>cd ..<br />
dpkg -i *.deb</code></p>
<p>Reference(s):<br />
<a href="http://www.debian.org/doc/manuals/apt-howto/ch-sourcehandling.en.html">http://www.debian.org/doc/manuals/apt-howto/ch-sourcehandling.en.html</a></p>



<p>Tags: <a href="../2-0-4/index.html" rel="tag">2.0.4</a>, <a href="../backporting/index.html" rel="tag">backporting</a>, <a href="index.html" rel="tag">debian</a>, <a href="../etch/index.html" rel="tag">etch</a>, <a href="../testing/index.html" rel="tag">testing</a>, <a href="../unstable/index.html" rel="tag">unstable</a>, <a href="../varnish/index.html" rel="tag">varnish</a></p>
			   

			   </div>

			   

			   <div class="info-box"><a href="../../2009/10/backporting-varnish-from-debian-unstabletesting-to-etch/index.html#comments">No Comments</a></div>

			  

			   

			   <!-- End Post -->



	 

				<!-- Start Post -->

		 

		       <div class="post">

			   

			   <h2><a href="../../2009/09/making-debian-etch-boot-with-uuid-not-hardcoded-blockdevicename/index.html" rel="bookmark" title="Permanent Link to Making Debian Etch boot with UUID, not hardcoded blockdevicename">Making Debian Etch boot with UUID, not hardcoded blockdevicename</a></h2>



<div class="post-info">Posted September 7, 2009 by MrBerry</div>

			   

			   <p>You got additional disk controllers in your server and the etch kernel is fucking up your devicenames from time to time.<br />
Suddenly when you reboot the etch kernel decides to make /dev/sda become /dev/sdf etc.<br />
Ubuntu has learned from this and they use <a href="http://en.wikipedia.org/wiki/UUID">UUID</a>.<br />
This is a unique ID the filesystem becomes, and when you boot, you really want to catch the right device for the root filesystem, or get a crappy Busybox shell.</p>
<p>This is how you implement it on Debian Etch (and possibly Lenny, if its not default there either):</p>
<p><code>fittafeis:~# /lib/udev/vol_id /dev/sda1<br />
ID_FS_USAGE=filesystem<br />
ID_FS_TYPE=ext3<br />
ID_FS_VERSION=1.0<br />
ID_FS_UUID=3abbdf59-4a9e-4be1-ac56-f474609e637c<br />
ID_FS_LABEL=<br />
ID_FS_LABEL_SAFE= </code></p>
<p>Now edit this line in /boot/grub/menu.lst:</p>
<p>From:  <code># kopt=root=/dev/sda1 ro</code><br />
To: <code># kopt=root=UUID=3abbdf59-4a9e-4be1-ac56-f474609e637c ro </code></p>
<p>Then run update-grub and it will update all your kernel entries using UUID <img src="../../wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley" /> </p>



<p>Tags: <a href="../blockdevice/index.html" rel="tag">blockdevice</a>, <a href="index.html" rel="tag">debian</a>, <a href="../etch/index.html" rel="tag">etch</a>, <a href="../uuid/index.html" rel="tag">uuid</a></p>
			   

			   </div>

			   

			   <div class="info-box"><a href="../../2009/09/making-debian-etch-boot-with-uuid-not-hardcoded-blockdevicename/index.html#comments">1 Comment</a></div>

			  

			   

			   <!-- End Post -->



	 

				<!-- Start Post -->

		 

		       <div class="post">

			   

			   <h2><a href="../../2009/09/mysql-authentication-backwards-compability/index.html" rel="bookmark" title="Permanent Link to Mysql authentication backwards compability">Mysql authentication backwards compability</a></h2>



<div class="post-info">Posted September 4, 2009 by morten</div>

			   

			   <p>Had an issue today where an old mysql-client on debian sarge failed to connect to a newer mysql-server on debian etch.</p>
<p>I was happy to find out that it&#8217;s easily fixed : </p>
<p><code>update mysql.user set password=OLD_PASSWORD('supahsecretpassword') where user='theuser' and host='some-ip-address';</code></p>
<p>then just :</p>
<p><code>flush privileges;</code></p>
<p>and you&#8217;re gooooood  to goooooooooo <img src="../../wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley" /> </p>



<p>Tags: <a href="index.html" rel="tag">debian</a>, <a href="../mysql/index.html" rel="tag">mysql</a>, <a href="../sarge/index.html" rel="tag">sarge</a></p>
			   

			   </div>

			   

			   <div class="info-box"><a href="../../2009/09/mysql-authentication-backwards-compability/index.html#comments">No Comments</a></div>

			  

			   

			   <!-- End Post -->



	 

				<!-- Start Post -->

		 

		       <div class="post">

			   

			   <h2><a href="../../2009/08/setting-up-postgres-loadbalancing-on-debian/index.html" rel="bookmark" title="Permanent Link to Setting up postgres loadbalancing on debian">Setting up postgres loadbalancing on debian</a></h2>



<div class="post-info">Posted August 26, 2009 by morten</div>

			   

			   <p>There&#8217;s a few ways to do it, but I personally found pgpool2 to be very nice and easy to set up.<br />
Here&#8217;s a quick and dirty guide to get it up and running.</p>
<p>First of all, you want your database backends to look exactly the same.<br />
So dump the database and restore it on your second server.<br />
Make sure your postgres backends allows your pgpool host to connect to them.</p>
<p>Pick a host where you wanna run pgtool2.</p>
<p><code>apt-get install pgpool2</code></p>
<p>It will automatically install a config file under <code>/etc/pgpool.conf</code> and start up pgpool2. Not very useful yet, since you need to do some configuring, so just kill it and open the config file for editing.<br />
Note: pgpool has several config options that you can play with. I&#8217;m not gonna go through them here, but just show how to get the basics up and running.</p>
<p>First of all, you need to config access to the master/system dbserver: </p>
<p><code># system DB info<br />
system_db_hostname = 'test-dbserver1'<br />
system_db_port = 5432<br />
system_db_dbname = 'pgpool'<br />
system_db_schema = 'pgpool_catalog'<br />
system_db_user = 'someuser'<br />
system_db_password = 'md5hashedvalue'<br />
</code></p>
<p>To find your md5 hashed password value, you can just use the command pg_md5 :</p>
<p><code>pg_md5 yourpasswordhere</code></p>
<p>After that you should configure info about your backend servers : </p>
<p><code>backend_hostname0 = 'test-dbserver1'<br />
backend_port0 = 5432<br />
backend_weight0 = 1<br />
backend_hostname1 = 'test-dbserver2'<br />
backend_port1 = 5432<br />
backend_weight1 = 1<br />
</code></p>
<p>&#8230;.and that&#8217;s about it. Now fire up pgpool2 on your host by typing : </p>
<p><code>pgpool -n -d</code></p>
<p>This will start pgpool in the foreground and display all debug info about whats going on. Handy when checking if things work properly. If they do, you can restart it by typing : </p>
<p><code>pgpool -f /etc/pgpool.conf</code></p>
<p>If you want to turn on replication, just change the parameter to: </p>
<p><code>replication_mode = true</code></p>
<p>..and restart pgpool.</p>



<p>Tags: <a href="index.html" rel="tag">debian</a>, <a href="../pgpool/index.html" rel="tag">pgpool</a>, <a href="../pgpool2/index.html" rel="tag">pgpool2</a>, <a href="../postgres/index.html" rel="tag">postgres</a></p>
			   

			   </div>

			   

			   <div class="info-box"><a href="../../2009/08/setting-up-postgres-loadbalancing-on-debian/index.html#comments">1 Comment</a></div>

			  

			   

			   <!-- End Post -->



	 

				<!-- Start Post -->

		 

		       <div class="post">

			   

			   <h2><a href="../../2009/07/debian-lenny-xen-and-live-migration-using-iscsi-storage-backend/index.html" rel="bookmark" title="Permanent Link to Debian Lenny, Xen and live migration using iscsi storage backend">Debian Lenny, Xen and live migration using iscsi storage backend</a></h2>



<div class="post-info">Posted July 10, 2009 by MrDingle</div>

			   

			   <p>After alot of google-ing for iscsi powered live migration i found references to these two block-iscsi scripts:</p>
<p><a href="http://kinkrsoftware.nl/contrib/xen/block-iscsi">http://kinkrsoftware.nl/contrib/xen/block-iscsi</a><br />
<a href="http://www.suse.de/~garloff/linux/xen/scripts/block-iscsi">http://www.suse.de/~garloff/linux/xen/scripts/block-iscsi</a></p>
<p>However none of them worked &#8220;out of the box&#8221; with Debian Lenny. After alot of messing around with adding debug output in the scripts i found the script in the first link to work when i changed the path to iscsiadm from /usr/sbin to /usr/bin (since the open-iscsi lenny package installs iscsiadm to /usr/bin) and when using the following in my VMs .cfg:</p>
<p><code>disk = [ 'iscsi:iqn.2006-01.com.openfiler:tsn.64b04dcbd835,hda1,w' ]</code></p>
<p>Dont forget to stick the block-iscsi script in /etc/xen/scripts and chmod +x ! <img src="../../wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley" /> </p>



<p>Tags: <a href="../block-iscsi/index.html" rel="tag">block-iscsi</a>, <a href="index.html" rel="tag">debian</a>, <a href="../lenny/index.html" rel="tag">lenny</a>, <a href="../xen/index.html" rel="tag">xen</a></p>
			   

			   </div>

			   

			   <div class="info-box"><a href="../../2009/07/debian-lenny-xen-and-live-migration-using-iscsi-storage-backend/index.html#comments">No Comments</a></div>

			  

			   

			   <!-- End Post -->



	 

				<!-- Start Post -->

		 

		       <div class="post">

			   

			   <h2><a href="../../2009/01/debian-sarge-31-repositories-gone/index.html" rel="bookmark" title="Permanent Link to Debian sarge (3.1) repositories gone">Debian sarge (3.1) repositories gone</a></h2>



<div class="post-info">Posted January 4, 2009 by MrBerry</div>

			   

			   <p>Yes so the sarge repos is gone from all official debian mirrors.</p>
<p>Still got an old sarge box and want to install some packages?</p>
<p>Add this line to your /etc/apt/sources.list:</p>
<p><code> deb http://archive.debian.org/debian/ sarge main</code></p>
<p>And remove all the others.</p>
<p>Now do:<br />
<code>apt-get update</code></p>
<p>Now you should be able to install packages for your sarge. (But you really should upgrade due to big security risks!)</p>



<p>Tags: <a href="../apt/index.html" rel="tag">apt</a>, <a href="index.html" rel="tag">debian</a>, <a href="../repo/index.html" rel="tag">repo</a>, <a href="../sarge/index.html" rel="tag">sarge</a></p>
			   

			   </div>

			   

			   <div class="info-box"><a href="../../2009/01/debian-sarge-31-repositories-gone/index.html#comments">No Comments</a></div>

			  

			   

			   <!-- End Post -->



	 

				<!-- Start Post -->

		 

		       <div class="post">

			   

			   <h2><a href="../../2008/10/i-just-installed-a-new-debian-etch-box-with-dhcp-changed-the-etcnetworkinterfaces-to-a-static-setup-and-now-etcinitdnetwork-restart-does-not-work/index.html" rel="bookmark" title="Permanent Link to I just installed a new debian etch box with dhcp, changed the /etc/network/interfaces to a static setup and now /etc/init.d/network restart does not work&#8230;.">I just installed a new debian etch box with dhcp, changed the /etc/network/interfaces to a static setup and now /etc/init.d/network restart does not work&#8230;.</a></h2>



<div class="post-info">Posted October 17, 2008 by MrDingle</div>

			   

			   <p>gah&#8230; We use <a href="http://www.informatik.uni-koeln.de/fai/">FAI</a> to auto install our debian servers. It installs the system with dhcp and when it reboots for the first time the box comes perfectly online. However, I want the box to have a static address and so far this is a manual operations in our setup. So i change my /etc/network/interfaces file to reflect a static setup, something like:</p>
<p><code>host:~# cat /etc/network/interfaces<br />
# The loopback network interface<br />
auto lo<br />
iface lo inet loopback<br />
<br />
# The primary network interface<br />
allow-hotplug eth0<br />
iface eth0 inet static<br />
        address 192.168.1.250<br />
        netmask 255.255.255.0<br />
        network 192.168.1.0<br />
        broadcast 192.168.1.255<br />
        gateway 192.168.1.1<br />
</code><br />
I just copy/pasted this setup from another box on the same network and changed the &#8220;address&#8221; field. And then i issued:</p>
<p><code>host:~# /etc/init.d/networking restart<br />
Reconfiguring network interfaces...done.<br />
</code><br />
Hmmm nothing happens&#8230; Lets take a peak in the init.d script and see what the hell it does:</p>
<p><code>host:~# cat /etc/init.d/networking<br />
#!/bin/sh -e<br />
### BEGIN INIT INFO<br />
# Provides:          networking<br />
# Required-Start:    mountkernfs ifupdown $local_fs<br />
# Required-Stop:     ifupdown $local_fs<br />
# Default-Start:     S<br />
# Default-Stop:      0 6<br />
# Short-Description: Raise network interfaces.<br />
### END INIT INFO<br />
<br />
PATH="/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin"<br />
<br />
[ -x /sbin/ifup ] || exit 0<br />
<br />
. /lib/lsb/init-functions<br />
<br />
spoofprotect_rp_filter() {<br />
    [ -e /proc/sys/net/ipv4/conf/all/rp_filter ] || return 1<br />
    RC=0<br />
    for f in /proc/sys/net/ipv4/conf/*/rp_filter; do<br />
	echo 1 > $f || RC=1<br />
    done<br />
    return $RC<br />
}<br />
<br />
spoofprotect() {<br />
    log_action_begin_msg "Setting up IP spoofing protection"<br />
    if spoofprotect_rp_filter; then<br />
	log_action_end_msg 0 "rp_filter"<br />
    else<br />
	log_action_end_msg 1<br />
    fi<br />
}<br />
<br />
ip_forward() {<br />
    log_action_begin_msg "Enabling packet forwarding"<br />
    if echo 1 > /proc/sys/net/ipv4/ip_forward; then<br />
        log_action_end_msg 0<br />
    else<br />
	log_action_end_msg 1<br />
    fi<br />
}<br />
<br />
syncookies() {<br />
    log_action_begin_msg "Enabling TCP SYN cookies"<br />
    if echo 1 > /proc/sys/net/ipv4/tcp_syncookies; then<br />
        log_action_end_msg 0<br />
    else<br />
	log_action_end_msg 1<br />
    fi<br />
}<br />
<br />
doopt() {<br />
    optname=$1<br />
    default=$2<br />
    opt=`grep "^$optname=" /etc/network/options || true`<br />
    if [ -z "$opt" ]; then<br />
	opt="$optname=$default"<br />
    fi<br />
    optval=${opt#$optname=}<br />
    if [ "$optval" = "yes" ]; then<br />
	eval $optname<br />
    fi<br />
}<br />
<br />
process_options() {<br />
    [ -e /etc/network/options ] || return 0<br />
    log_warning_msg "/etc/network/options is deprecated (see README.Debian of netbase)."<br />
    doopt spoofprotect yes<br />
    doopt syncookies no<br />
    doopt ip_forward no<br />
}<br />
<br />
case "$1" in<br />
start)<br />
	process_options<br />
	log_action_begin_msg "Configuring network interfaces"<br />
	if ifup -a; then<br />
	    log_action_end_msg $?<br />
	else<br />
	    log_action_end_msg $?<br />
	fi<br />
	;;<br />
<br />
stop)<br />
	if sed -n 's/^[^ ]* \([^ ]*\) \([^ ]*\) .*$/\2/p' /proc/mounts |<br />
		grep -qE '^(nfs[1234]?|smbfs|ncp|ncpfs|coda|cifs)$'; then<br />
	    log_warning_msg "not deconfiguring network interfaces: network shares still mounted."<br />
	    exit 0<br />
	fi<br />
<br />
	log_action_begin_msg "Deconfiguring network interfaces"<br />
	if ifdown -a --exclude=lo; then<br />
	    log_action_end_msg $?<br />
	else<br />
	    log_action_end_msg $?<br />
	fi<br />
	;;<br />
<br />
force-reload|restart)<br />
	process_options<br />
	log_action_begin_msg "Reconfiguring network interfaces"<br />
	ifdown -a --exclude=lo || true<br />
	if ifup -a --exclude=lo; then<br />
	    log_action_end_msg $?<br />
	else<br />
	    log_action_end_msg $?<br />
	fi<br />
	;;<br />
<br />
*)<br />
	echo "Usage: /etc/init.d/networking {start|stop|restart|force-reload}"<br />
	exit 1<br />
	;;<br />
esac<br />
<br />
exit 0<br />
</code><br />
The interesting part is the restart|reload function:</p>
<p><code>	log_action_begin_msg "Reconfiguring network interfaces"<br />
	ifdown -a --exclude=lo || true<br />
	if ifup -a --exclude=lo; then<br />
</code><br />
Oki so lets try to issue these commands manually and see what happens:</p>
<p><code>host:~# ifdown eth0<br />
ifdown: interface eth0 not configured<br />
</code><br />
&#8230;. *sigh*. Now what, I just configured it&#8230; Its time to look at some other boxes where this doesnt happen. And I find that some boxes does not have the &#8220;allow-hotplug eth0&#8243;, but instead just &#8220;auto eth0&#8243;. So I changed my setup to the following:</p>
<p><code>host:~# cat /etc/network/interfaces<br />
# The loopback network interface<br />
auto lo<br />
iface lo inet loopback<br />
<br />
# The primary network interface<br />
auto eth0<br />
iface eth0 inet static<br />
        address 192.168.1.250<br />
        netmask 255.255.255.0<br />
        network 192.168.1.0<br />
        broadcast 192.168.1.255<br />
        gateway 192.168.1.1<br />
</code><br />
And what do you know&#8230;. IT WORKED!!</p>



<p>Tags: <a href="index.html" rel="tag">debian</a>, <a href="../ifdown/index.html" rel="tag">ifdown</a>, <a href="../ifup/index.html" rel="tag">ifup</a>, <a href="../init-script/index.html" rel="tag">init script</a>, <a href="../network/index.html" rel="tag">network</a>, <a href="../networking/index.html" rel="tag">networking</a></p>
			   

			   </div>

			   

			   <div class="info-box"><a href="../../2008/10/i-just-installed-a-new-debian-etch-box-with-dhcp-changed-the-etcnetworkinterfaces-to-a-static-setup-and-now-etcinitdnetwork-restart-does-not-work/index.html#comments">1 Comment</a></div>

			  

			   

			   <!-- End Post -->






<div class="clear">

<div class="alignleft"></div>

			<div class="alignright"></div>

</div>



		   

		 

		 </div>

		 <!-- End Content -->

		 

		 <!-- Begin Sidebar -->
		 <div id="sidebar">

<div class="sidebar-item"><div class="sidebar-heading"><h3>Tags</h3></div><div class="sidebar-content"><div class="tagcloud"><a href='../apache/index.html' class='tag-link-35' title='3 topics' style='font-size: 10.153846153846pt;'>apache</a>
<a href='../apple/index.html' class='tag-link-74' title='4 topics' style='font-size: 11.948717948718pt;'>apple</a>
<a href='../appletv/index.html' class='tag-link-257' title='3 topics' style='font-size: 10.153846153846pt;'>appletv</a>
<a href='../atv/index.html' class='tag-link-266' title='3 topics' style='font-size: 10.153846153846pt;'>atv</a>
<a href='../authentication/index.html' class='tag-link-111' title='2 topics' style='font-size: 8pt;'>authentication</a>
<a href='../bigip/index.html' class='tag-link-234' title='3 topics' style='font-size: 10.153846153846pt;'>bigip</a>
<a href='../broadcom/index.html' class='tag-link-255' title='3 topics' style='font-size: 10.153846153846pt;'>broadcom</a>
<a href='../cfengine/index.html' class='tag-link-144' title='2 topics' style='font-size: 8pt;'>cfengine</a>
<a href='../check_http/index.html' class='tag-link-166' title='2 topics' style='font-size: 8pt;'>check_http</a>
<a href='../crystal/index.html' class='tag-link-263' title='4 topics' style='font-size: 11.948717948718pt;'>crystal</a>
<a href='../crystalhd/index.html' class='tag-link-259' title='4 topics' style='font-size: 11.948717948718pt;'>crystalhd</a>
<a href='../curl/index.html' class='tag-link-67' title='2 topics' style='font-size: 8pt;'>curl</a>
<a href='../dd/index.html' class='tag-link-17' title='2 topics' style='font-size: 8pt;'>dd</a>
<a href='index.html' class='tag-link-4' title='8 topics' style='font-size: 16.435897435897pt;'>debian</a>
<a href='../dell/index.html' class='tag-link-138' title='4 topics' style='font-size: 11.948717948718pt;'>dell</a>
<a href='../etch/index.html' class='tag-link-210' title='3 topics' style='font-size: 10.153846153846pt;'>etch</a>
<a href='../ext3/index.html' class='tag-link-12' title='2 topics' style='font-size: 8pt;'>ext3</a>
<a href='../firefox/index.html' class='tag-link-167' title='4 topics' style='font-size: 11.948717948718pt;'>firefox</a>
<a href='../firefuck/index.html' class='tag-link-208' title='3 topics' style='font-size: 10.153846153846pt;'>firefuck</a>
<a href='../funny/index.html' class='tag-link-182' title='4 topics' style='font-size: 11.948717948718pt;'>funny</a>
<a href='../hd/index.html' class='tag-link-264' title='4 topics' style='font-size: 11.948717948718pt;'>hd</a>
<a href='../iphone/index.html' class='tag-link-75' title='3 topics' style='font-size: 10.153846153846pt;'>iphone</a>
<a href='../kernel/index.html' class='tag-link-73' title='2 topics' style='font-size: 8pt;'>kernel</a>
<a href='../linux/index.html' class='tag-link-72' title='10 topics' style='font-size: 18.051282051282pt;'>linux</a>
<a href='../login/index.html' class='tag-link-150' title='2 topics' style='font-size: 8pt;'>login</a>
<a href='../monitoring/index.html' class='tag-link-29' title='11 topics' style='font-size: 18.769230769231pt;'>monitoring</a>
<a href='../mplayer/index.html' class='tag-link-55' title='3 topics' style='font-size: 10.153846153846pt;'>mplayer</a>
<a href='../mysql/index.html' class='tag-link-88' title='3 topics' style='font-size: 10.153846153846pt;'>mysql</a>
<a href='../nagios/index.html' class='tag-link-25' title='17 topics' style='font-size: 22pt;'>nagios</a>
<a href='../network/index.html' class='tag-link-94' title='2 topics' style='font-size: 8pt;'>network</a>
<a href='../osx/index.html' class='tag-link-163' title='3 topics' style='font-size: 10.153846153846pt;'>osx</a>
<a href='../ping/index.html' class='tag-link-81' title='3 topics' style='font-size: 10.153846153846pt;'>ping</a>
<a href='../plugins/index.html' class='tag-link-165' title='3 topics' style='font-size: 10.153846153846pt;'>plugins</a>
<a href='../rar/index.html' class='tag-link-57' title='2 topics' style='font-size: 8pt;'>rar</a>
<a href='../salt/index.html' class='tag-link-316' title='3 topics' style='font-size: 10.153846153846pt;'>salt</a>
<a href='../saltstack/index.html' class='tag-link-317' title='3 topics' style='font-size: 10.153846153846pt;'>saltstack</a>
<a href='../sarge/index.html' class='tag-link-113' title='2 topics' style='font-size: 8pt;'>sarge</a>
<a href='../slow/index.html' class='tag-link-158' title='2 topics' style='font-size: 8pt;'>slow</a>
<a href='../ssh/index.html' class='tag-link-109' title='2 topics' style='font-size: 8pt;'>ssh</a>
<a href='../tv/index.html' class='tag-link-271' title='3 topics' style='font-size: 10.153846153846pt;'>tv</a>
<a href='../ubuntu/index.html' class='tag-link-173' title='6 topics' style='font-size: 14.641025641026pt;'>ubuntu</a>
<a href='../varnish/index.html' class='tag-link-31' title='4 topics' style='font-size: 11.948717948718pt;'>varnish</a>
<a href='../video/index.html' class='tag-link-27' title='2 topics' style='font-size: 8pt;'>video</a>
<a href='../xbmc/index.html' class='tag-link-256' title='3 topics' style='font-size: 10.153846153846pt;'>xbmc</a>
<a href='../xen/index.html' class='tag-link-39' title='4 topics' style='font-size: 11.948717948718pt;'>xen</a></div>
</div></div><div class="sidebar-item"><div class="sidebar-heading"><h3>Links</h3></div><div class="sidebar-content">
	<ul class='xoxo blogroll'>
<li><a href="http://www.debian.org/" title="Debian">Debian</a></li>
<li><a href="http://www.usenix.org/lisa08/going" title="We are going to LISA &#8217;08">LISA &#8217;08</a></li>
<li><a href="http://marcus.nordaaker.com/" title="marcus ramberg">marcus ramberg</a></li>

	</ul>
</div></div>
<!-- WP Wall -->
<div class="sidebar-item"><div class="sidebar-heading"><h3>Wall</h3></div><div class="sidebar-content">
<div id="wp_wall">
		<div class="wallnav">
					<img alt="Previous" id="img_left" src="../../wp-content/plugins/wp-wall/i/left.png" />
					<img alt="Next" id="img_right" src="../../wp-content/plugins/wp-wall/i/right.png" />
					  </div> 
	<div id="wallcomments">
			<div id="wp_latest">Latest on Thu, 04:38 pm</div><p class="wall-1 "><span class="wallauthor" title="Iliya#ivanov[IvanovRukidssqu,2,5] on 2020-07-02 16:38:51" >Iliya#ivanov[IvanovRukidssqu,2,5]</span><span class="wallcomment" title="Мое почтение. 
Располагаю кредитная карта в Гранит банк на сумму 195000 
Перестал гасить потому что украли деньги. Нынче трезвонят и пугают и просят возвратить 1400 
 
Установил софт  запрет входящих вызовов наборы остановились. 
Что совершать с займом дальше предложите?" >: Мое почтение. 
Располагаю кредитная карта в Гранит банк на сумму 195000 
Перестал гасить потому что украли деньги. Нынче трезвонят и пугают и просят возвратить 1400 [...]</span></p><p class="wall-2 wall-alt "><span class="wallauthor" title="Colton Ward on 2020-04-14 09:12:09" >Colton Ward</span><span class="wallcomment" title="Bought a groupon for botox and filler. Waited for 
over two hours for my procedure. During the consultation I 
clearly explained to the woman that I did not want to purchase 
any more products and spend more money and just wanted to 
try out the cosmetic procedures I had purchased which was already $300.



Once I was finally seen by the \   https://gome.com.cn" >: Bought a groupon for botox and filler. Waited for 
over two hours for my procedure. During the consultation I 
clearly explained to the woman that [...]</span></p><p class="wall-3 "><span class="wallauthor" title="eticobysu on 2020-01-27 23:11:02" >eticobysu</span><span class="wallcomment" title="kategoriyab.ru" >: kategoriyab.ru</span></p><p class="wall-4 wall-alt "><span class="wallauthor" title="txcyperoz61 on 2019-12-17 21:41:07" >txcyperoz61</span><span class="wallcomment" title="Огромное тебе СПАСИБО" >: Огромное тебе СПАСИБО</span></p><p class="wall-5 "><span class="wallauthor" title="Dallas on 2019-10-30 06:16:11" >Dallas</span><span class="wallcomment" title="Thanks in support of sharing such a pleasant idea, article is fastidious, thats why i have read it entirely
weight loss doctors chicago phentermine
weight loss doctors chicago phentermine weight loss doctors chicago phentermine" >: Thanks in support of sharing such a pleasant idea, article is fastidious, thats why i have read it entirely
weight loss doctors chicago phentermine
weight loss doctors [...]</span></p><input type="hidden" name="wallpage" id="wallpage" value="1" /><input type="hidden" name="page_left" id="page_left" value="1" /><input type="hidden" name="page_right" id="page_right" value="2" />	</div> 

	
	
		
					
			<p><a id="wall_post_toggle"> &raquo; Leave a reply</a></p>	
		
				
	

	<div id="wall_post">
		<form action="http://dingleberry.me/wp-content/plugins/wp-wall/wp-wall-ajax.php" method="post" id="wallform">
		
						
			<p>
			<label for="wpwall_author"><small>Name</small></label><br/>
			<input type="text" name="wpwall_author" id="wpwall_author" value=""  tabindex="11"  />
			</p>
			
						
						
			<p>
			<label for="wpwall_comment"><small>Comment</small></label><br/>
			<textarea name="wpwall_comment" id="wpwall_comment" rows="3" cols="" tabindex="13" ></textarea>
			</p>
					
			<p><input name="submit_wall_post" type="submit" id="submit_wall_post" tabindex="14" value="Submit" /></p>
			
		</form> 								
	</div>
	
	<div id="wallresponse"></div>
	
</div>
<br />
</div></div><div class="sidebar-item"><div class="sidebar-heading"><h3>Meta</h3></div><div class="sidebar-content">			<ul>
						<li><a href="../../wp-login.html">Log in</a></li>
			<li><a href="../../feed/index.html" title="Syndicate this site using RSS 2.0">Entries <abbr title="Really Simple Syndication">RSS</abbr></a></li>
			<li><a href="../../comments/feed/index.html" title="The latest comments to all posts in RSS">Comments <abbr title="Really Simple Syndication">RSS</abbr></a></li>
			<li><a href="http://wordpress.org/" title="Powered by WordPress, state-of-the-art semantic personal publishing platform.">WordPress.org</a></li>						</ul>
</div></div><div class="sidebar-item">	          	 <div class="sidebar-item">
				 <div class="sidebar-heading"><h3>Search</h3></div>
				 <div class="sidebar-content">
<form method="get" id="searchform" action="http://dingleberry.me/">
<div><input type="text" value="" name="s" id="s" />
<input type="submit" id="searchsubmit" value="" />
</div>
</form>
				</div>
				</div></div></div>

		 </div>
		 <!-- End Sidebar -->
<div id="footer">

Copyright &copy; 2008.  Design by <a href="http://imanto.com/">imanto.com</a>.  Theme by <a href="http://www.themelab.com/">Theme Lab</a> and <a href="http://www.websiteoffice.com/">Online Marketing</a>.  Powered by <a href="http://wordpress.org/">WordPress</a>.

37 queries in 0.193  seconds.

   </div>

   <!-- End Wrapper -->

<script type='text/javascript' src='../../wp-content/uploads/shadowbox-js/afc2df7514bde3dd091bff35b266117519ce.js?ver=3.0.3'></script>

<!-- Begin Shadowbox JS v3.0.3.10 -->
<!-- Selected Players: html, iframe, img, qt, swf, wmp -->
<script type="text/javascript">
/* <![CDATA[ */
	var shadowbox_conf = {
		animate: true,
		animateFade: true,
		animSequence: "sync",
		modal: false,
		showOverlay: true,
		overlayColor: "#000",
		overlayOpacity: "0.8",
		flashBgColor: "#000000",
		autoplayMovies: true,
		showMovieControls: true,
		slideshowDelay: "0",
		resizeDuration: "0.35",
		fadeDuration: "0.35",
		displayNav: true,
		continuous: false,
		displayCounter: true,
		counterType: "default",
		counterLimit: "10",
		viewportPadding: "20",
		handleOversize: "resize",
		handleUnsupported: "link",
		autoDimensions: false,
		initialHeight: "160",
		initialWidth: "320",
		enableKeys: true,
		skipSetup: false,
		flashParams: {bgcolor:"#000000", allowFullScreen:true},
		flashVars: {},
		flashVersion: "9.0.0",
		useSizzle: false
	};
	Shadowbox.init(shadowbox_conf);
/* ]]> */
</script>
<!-- End Shadowbox JS -->


<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
var pageTracker = _gat._getTracker("UA-5928000-1");
pageTracker._trackPageview();
</script>

</body>


<!-- Mirrored from dingleberry.me/tag/debian/ by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 28 Jul 2020 09:25:47 GMT -->
</html>